name = "dinamani-tamilnadu"
desc = "dinamani tamilnadu feed"
schedule = "@every 1h"
[record]
    sourceUri ="https://www.dinamani.com/tamilnadu"
    [[record.preprocessor]]
        name="http:get"
            [record.preprocessor.params]
                "useCache" = false
    [[record.preprocessor]]
        name="css:select"
            [record.preprocessor.params]
                "selectors" = ["#products_3850"]

     [[record.preprocessor]]
        name="css:selectEach"
            [record.preprocessor.params]
                "selectors" = [".item"]
    
     [[record.preprocessor]]
        name="split"
	
     [[record.preprocessor]]
        name="combine"

    [[record.field]]
        name= "Title"
        [[record.field.processor]]
            name="css:select"
                [record.field.processor.params]
                    "selectors" = ["h5 .article_click"]
        [[record.field.processor]]
             name="regexp:selectOne"
                 [record.field.processor.params]
                     "selectors" = ["<a[^>]*>(?P<data>.*[^<])</a>"]

    [[record.field]]
        name= "Content"
        [[record.field.processor]]
             name="regexp:selectOne"
                 [record.field.processor.params]
                     "selectors" = ["href=\"(?P<data>[^\"]*)"]
        [[record.field.processor]]
            name="http:get"
                [record.field.processor.params]
                    "useCache" = true
        [[record.field.processor]]
            name="css:select"
                [record.field.processor.params]
                    "selectors" = ["#content"]
        [[record.field.processor]]
            name="css:select"
                [record.field.processor.params]
                    "selectors" = ["figure", "#storyContent"]
        [[record.field.processor]]
            name="css:remove"
                [record.field.processor.params]
                    "selectors" = ["script", "style", ".morefrom"]
        [[record.field.processor]]
            name="css:select"
                [record.field.processor.params]
                    "selectors" = ["body"]
        [[record.field.processor]]
            name="regexp:remove"
                [record.field.processor.params]
                    "selectors" = ['class="[^"]+"', 'style="[^"]+"']
     [[record.field]]
        name= "PublishedAt"
        [[record.field.processor]]
             name="regexp:selectOne"
                 [record.field.processor.params]
                     "selectors" = ["href=\"(?P<data>[^\"]*)"]
        [[record.field.processor]]
            name="http:get"
                [record.field.processor.params]
                    "useCache" = true
        [[record.field.processor]]
            name="regexp:selectOne"
                [record.field.processor.params]
                    "selectors" = ['datePublished":"(?P<data>[^"]+)']
        [[record.field.processor]]
            name="regexp:replace"
                [record.field.processor.params]
                    "old" = ['IST']
                    "new" = "T"
        [[record.field.processor]]
            name="date:parse"
                [record.field.processor.params]
                    "layout" = "2006-01-02T15:04:05Z07:00"

    [[record.field]]
        name= "ThumbImageUrl"
        [[record.field.processor]]
            name="regexp:selectOne"
                [record.field.processor.params]
                    "selectors" = ['<img[^>]+src="(?P<data>[^"]+)']

    [[record.field]]
        name= "Category"
        [[record.field.processor]]
            name="constant"
                [record.field.processor.params]
                    "value" = "Tamilnadu"

     [[record.field]]
        name= "SourceUrl"
        [[record.field.processor]]
             name="regexp:selectOne"
                 [record.field.processor.params]
                     "selectors" = ["href=\"(?P<data>[^\"]*)"]

    [[record.field]]
        name= "Source"
        [[record.field.processor]]
            name="constant"
                [record.field.processor.params]
                    "value" = "dinamani"

    [[record.field]]
        name= "ProcessedAt"
        [[record.field.processor]]
            name="utcnow"
